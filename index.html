<!doctype html>
<html lang="pt-BR">
<head>
  <!-- Metadados e assets principais -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portal do 3¬∫ BPM ‚Äì Opera√ß√µes & Gestor</title>
  <meta name="description" content="Hub do batalh√£o: opera√ß√µes vigentes, links √∫teis e √°rea restrita do gestor" />
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="icon" href="assets/logo.svg" />
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="container">
    <!-- Cabe√ßalho (logo + t√≠tulo + vers√£o) -->
    <header>
      <div class="brand">
        <img src="assets/logo.svg" alt="3¬∫ BPM" class="logo" />
        <div>
          <h1>Portal do 3¬∫ BPM</h1>
          <div class="muted">Opera√ß√µes vigentes, links √∫teis e √°rea restrita do gestor.</div>
        </div>
      </div>
      <div class="muted" id="versao"></div>
    </header>

    <!-- Abas de navega√ß√£o -->
    <nav class="tabs" role="tablist" aria-label="Se√ß√µes">
      <button class="tab" id="tab-op" role="tab" aria-selected="true" aria-controls="painel-op">Opera√ß√µes Vigentes</button>
      <button class="tab" id="tab-gestor" role="tab" aria-selected="false" aria-controls="painel-gestor">Gestor (Restrito)</button>
      <button class="tab" id="tab-escala" role="tab" aria-selected="false" aria-controls="painel-escala">Escala Mensal</button>
    </nav>

    <!-- Barra de busca + seletor de status -->
    <div class="bar">
      <label class="search" aria-label="Pesquisar">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.6"/></svg>
        <input id="q" placeholder="Pesquisar por t√≠tulo, descri√ß√£o ou URL‚Ä¶" />
      </label>
      <div class="select">
        <label for="statusSel" class="muted">Status:</label>
        <select id="statusSel" class="input" style="max-width:200px">
          <option value="Todos">Todos</option>
          <option value="Vigente">Vigente</option>
          <option value="Planejada">Planejada</option>
          <option value="Encerrada">Encerrada</option>
        </select>
      </div>
    </div>

    <!-- Painel: Opera√ß√µes (p√∫blico) -->
    <section id="painel-op" role="tabpanel" aria-labelledby="tab-op">
      <div id="grid-op" class="grid" role="list"></div>
      <div id="empty-op" class="empty" hidden>Nenhum item encontrado. Ajuste filtros ou busca.</div>
    </section>

    <!-- Painel: Gestor (restrito por PIN) -->
    <section id="painel-gestor" role="tabpanel" aria-labelledby="tab-gestor" hidden>
      <div class="muted" style="margin-bottom:8px">√Årea restrita. Para sigilo real, use prote√ß√£o de servidor (Netlify password/Identity). Este PIN √© apenas controle local do navegador.</div>
      <div id="grid-gestor" class="grid" role="list"></div>
    </section>

<section id="painel-escala" role="tabpanel" aria-labelledby="tab-escala" hidden>
  <h2 style="margin:0 0 6px 0;font-size:18px;">Escala Mensal ‚Äì 3¬∫ BPM</h2>
  <div class="muted" style="margin-bottom:8px">Visualiza√ß√£o da escala completa por dia e por guarni√ß√£o.</div>

  <!-- üîπ Toolbar de filtros -->
  <div class="toolbar" id="escala-toolbar">
    <label class="muted">Guarni√ß√£o:</label>
    <select id="escalaSelGuarnicao" class="input" style="max-width:220px">
      <option value="Todos">Todos</option>
      <!-- op√ß√µes ser√£o preenchidas via JS -->
    </select>

    <label class="muted">Turno:</label>
    <select id="escalaSelTurno" class="input" style="max-width:160px">
      <option value="Todos">Todos</option>
      <!-- op√ß√µes ser√£o preenchidas via JS -->
    </select>

    <button id="escalaBtnLimpar" class="btn">Limpar</button>
  </div>

  <div class="table-wrap" id="escala-mensal"></div>
  <div id="empty-escala" class="empty" hidden>Nenhuma escala encontrada.</div>
</section>


      <!-- Distribui√ß√£o de RP por Turno -->
      <hr style="border:0;border-top:1px dashed var(--ring);margin:18px 0;">
      <h2 style="margin:0 0 6px 0;font-size:18px;">Distribui√ß√£o de RP por Turno</h2>
      <div class="muted" style="margin-bottom:8px">Consulta por turno e por cidade.</div>

      <div class="toolbar">
        <label class="muted">Turno:</label>
        <select id="turnoSel" class="input">
          <option value="ALFA">ALFA</option>
          <option value="BRAVO">BRAVO</option>
          <option value="CHARLIE">CHARLIE</option>
          <option value="DELTA">DELTA</option>
        </select>

        <label class="muted">Cidade:</label>
        <input id="buscaCidade" class="input" placeholder="Ex.: Arapiraca, Cra√≠bas..." style="max-width:260px">

        <button id="btnLimparFiltro" class="btn">Limpar</button>
      </div>

      <div class="table-wrap">
        <table class="rotina" id="tabelaDistrib">
          <thead>
            <tr>
              <th style="width:260px">Cidade</th>
              <th>RPs atribu√≠das no turno</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- Rotina RP -->
      <hr style="border:0;border-top:1px dashed var(--ring);margin:18px 0;">
      <h2 style="margin:0 0 6px 0;font-size:18px;">Rotina RP</h2>
      <div class="muted" style="margin-bottom:8px">
        Rotina de Servi√ßo ‚Äì Radiopatrulha ‚Äì 3¬∫ BPM.
      </div>
      <div id="rotina-rp"></div>
      <div id="empty-rp" class="empty" hidden>Nenhum dado de rotina encontrado.</div>

      <div id="empty-gestor" class="empty" hidden>Nenhum item encontrado. Ajuste filtros ou busca.</div>
    </section>

    <!-- Rodap√© -->
    <footer class="footer" id="siteFoot">
      &copy; <span id="year"></span> ‚Äî P3 ¬∑ 3¬∫ BPM. Todos os direitos reservados.
    </footer>
  </div>

  <!-- Toast (avisos) -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Modal: PIN do Gestor -->
  <div id="modal" class="modal" aria-modal="true" role="dialog" aria-labelledby="ttlModal">
    <div class="sheet">
      <h2 id="ttlModal">Acesso do Gestor</h2>
      <div class="note">PIN salvo apenas localmente. Para conte√∫do sigiloso, use autentica√ß√£o de servidor.</div>
      <div class="row">
        <input id="pin" class="input" type="password" placeholder="Digite o PIN" />
        <button id="pinBtn" class="btn primary">Desbloquear</button>
      </div>
    </div>
  </div>

  <!-- Script principal -->
  <script src="js/script.js"></script>
</body>
</html>
